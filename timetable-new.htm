<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Timetable Generator</title>
<style>
  :root {
    --primary: #004085;
    --danger: #dc3545;
    --light-grey: #f8f9fa;
    --info: #17a2b8;
    --medium-blue: #0069d9;
    --success: #28a745;
    --warning: #ffc107;
    --text: #004085;
    --muted: #666;
    --border: #004085;
    --card: white;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(135deg, rgba(248,249,250,0.95) 0%, rgba(233,236,239,0.9) 100%);color:var(--primary);font:400 14px/1.5 'Segoe UI',Arial,sans-serif;min-height:100vh;padding-top:90px}
  .container{max-width:100%;margin:0;padding:0}
  
  .header {
      display: flex;
      align-items: center;
      justify-content: space-between; 
      padding: 5px 0;
      margin: 0;
      background: linear-gradient(135deg, #004085 0%, #003366 50%, #004085 100%);
      border-bottom: 2px solid #002244;
      flex-wrap: wrap;
      backdrop-filter: blur(20px);
      box-shadow: 0 3px 15px rgba(0, 64, 133, 0.4);
      width: 100vw;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }
    .logo-left, .logo-right {
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      text-align: center;
    }
    
    .logo-left img, .logo-right img {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.3);
    }
    .header-text {
      text-align: center;
      flex: 1;
      min-width: 280px;
    }
    .header-text h1 {
      margin: 2px 0;
      font-weight: bold;
      font-size: 16px;
      line-height: 1.2;
    }
    .header-text h1:nth-child(2) {
      font-size: 20px;
      margin: 3px 0;
    }
    .green { color: white; }
    .orange { color: white; }
  
  /* Medium Box Leftmost Layout */
  .main-grid{display:grid;grid-template-columns:480px 1fr;gap:0;max-width:100%;margin:0;padding:0;align-items:start}
  .left-column{display:grid;grid-template-columns:1fr;gap:8px;position:fixed;left:0;top:90px;width:480px;padding:10px;height:calc(100vh - 90px);overflow-y:auto;z-index:100;scroll-behavior:smooth}
  @media(max-width:768px){.main-grid{grid-template-columns:1fr;gap:10px;padding:0 8px}.left-column{grid-template-columns:1fr;width:100%;height:auto;padding:8px}}
  
  /* Compact Cards */
  .card{background:linear-gradient(145deg, rgba(255,255,255,0.98) 0%, rgba(248,252,255,0.95) 100%);border:none;border-radius:6px;padding:8px;box-shadow:0 4px 12px rgba(0,64,133,0.06), 0 2px 8px rgba(0,0,0,0.03), inset 0 1px 0 rgba(255,255,255,0.9);backdrop-filter:blur(15px);position:relative;overflow:hidden;margin:0;border-left:2px solid var(--primary)}
  .card::before{content:'';position:absolute;top:0;left:0;bottom:0;width:3px;background:linear-gradient(180deg,var(--primary) 0%,var(--info) 50%,var(--success) 100%)}
  .card::after{content:'';position:absolute;top:0;right:0;bottom:0;width:1px;background:linear-gradient(180deg,rgba(0,64,133,0.06) 0%,rgba(23,162,184,0.12) 50%,rgba(40,167,69,0.06) 100%)}
  
  /* Compact Card Headers */
  .card h2{margin:0 0 8px;font-size:17px;color:var(--primary);font-weight:700;text-align:left;padding:8px 12px;background:linear-gradient(135deg,rgba(0,64,133,0.05) 0%,rgba(23,162,184,0.03) 50%,rgba(40,167,69,0.02) 100%);border-radius:6px;border:1px solid rgba(0,64,133,0.08);position:relative;margin:-6px -6px 8px -6px;box-shadow:0 2px 8px rgba(0,64,133,0.04)}
  .card h2::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--primary) 0%,var(--info) 50%,var(--success) 100%);border-radius:8px 8px 0 0}
  .card h2::after{content:'';position:absolute;bottom:-1px;left:15px;width:40px;height:2px;background:linear-gradient(90deg,var(--info),var(--success));border-radius:2px;box-shadow:0 1px 4px rgba(23,162,184,0.2)}
  
  /* Enhanced Form Elements */
  label{display:block;font-size:11px;color:var(--primary);margin:4px 0 2px;font-weight:600;text-transform:uppercase;letter-spacing:0.2px;position:relative;padding-left:16px}
  label::before{content:attr(data-icon);position:absolute;left:0;top:0;font-size:12px;color:var(--info)}
  input,select{width:100%;padding:6px 8px;border:1px solid rgba(0,64,133,0.12);background:linear-gradient(135deg,rgba(255,255,255,0.98) 0%,rgba(248,252,255,0.95) 100%);color:var(--primary);border-radius:4px;font-size:12px;outline:none;transition:all 0.3s ease;box-shadow:0 1px 4px rgba(0,0,0,0.04), inset 0 1px 0 rgba(255,255,255,0.8)}
  input:focus,select:focus{border-color:var(--info);box-shadow:0 0 0 2px rgba(23,162,184,.1), 0 4px 15px rgba(0,64,133,0.08), inset 0 1px 0 rgba(255,255,255,0.9);transform:translateY(-1px);background:linear-gradient(135deg,rgba(255,255,255,1) 0%,rgba(248,252,255,0.98) 100%)}
  
  /* Enhanced Buttons */
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 20px;border:2px solid rgba(0,64,133,0.2);background:linear-gradient(135deg,rgba(255,255,255,0.98) 0%,rgba(248,250,252,0.95) 100%);color:var(--primary);border-radius:10px;cursor:pointer;font-size:13px;font-weight:700;text-decoration:none;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(0,0,0,0.08)}
  .btn:hover{background:linear-gradient(135deg,rgba(233,236,239,0.98) 0%,rgba(248,250,252,0.95) 100%);border-color:var(--info);transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,64,133,0.15)}
  

  
  /* Compact Grid Layouts */
  .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin:4px 0;position:relative}
  .form-grid::before{content:'';position:absolute;top:-3px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,rgba(0,64,133,0.08) 50%,transparent 100%)}
  .inline-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin:6px 0}
  
  /* Enhanced Input Groups */
  .input-group{background:linear-gradient(135deg,rgba(248,252,255,0.9) 0%,rgba(255,255,255,0.85) 100%);padding:4px;border-radius:4px;border:1px solid rgba(0,64,133,0.06);box-shadow:0 1px 4px rgba(0,0,0,0.02), inset 0 1px 0 rgba(255,255,255,0.7);transition:all 0.3s ease;position:relative;overflow:hidden}
  .input-group::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,var(--info) 0%,var(--success) 100%);opacity:0;transition:opacity 0.3s ease}
  .input-group:hover{border-color:rgba(0,64,133,0.12);box-shadow:0 4px 15px rgba(0,64,133,0.04), inset 0 1px 0 rgba(255,255,255,0.8);transform:translateY(-1px)}
  .input-group:hover::before{opacity:0.7}
  

  

  
  /* Footer */
  .footer{color:var(--muted);font-size:14px;text-align:center;margin:30px 0;padding:25px;background:rgba(255,255,255,0.9);border-radius:20px;border:2px solid rgba(0,64,133,0.1);backdrop-filter:blur(8px)}
  
  /* Responsive */
  @media(max-width:768px){
    .container{padding:8px}
    .main-grid{padding:0 10px;gap:16px}
    .card{padding:20px;border-radius:16px}
    .btn{padding:14px 22px;font-size:14px}
    .header h1{font-size:26px}
    .form-grid,.time-grid{grid-template-columns:1fr;gap:12px}
  }
</style>
</head>
<body>
  <div class="header">
    <div class="logo-left">
      <img src="left-logo.png" alt="MET Logo">
    </div>
    <div class="header-text">
      <h1 class="green">üéì Maharaja Education Trust (R), Mysuru</h1>
      <h1 class="orange">üèõÔ∏è Maharaja Institute of Technology, Mysore</h1>
      <h1 class="green">An Autonomous Institution Affiliated to VTU, Belagavi</h1>
      <h1 class="orange">‚úÖ Approved by AICTE, New Delhi | Recognized by Government of Karnataka</h1>
    </div>
    <div class="logo-right">
      <img src="right-logo.png" alt="Circle Logo">
    </div>
  </div>
  
  <div class="container">

    <div class="main-grid">
      <div class="left-column">
        <!-- Premium Quick Setup Card -->
        <div class="card">
          <h2>‚öôÔ∏è Quick Setup</h2>
          <div class="form-grid">
            <div class="input-group">
              <label data-icon="üìÖ">Working Days</label>
              <select id="workingDays">
                <option value="5">Monday to Friday (5 Days)</option>
                <option value="6">Monday to Saturday (6 Days)</option>
                <option value="5alt">Tuesday to Saturday (5 Days)</option>
              </select>
            </div>
            <div class="input-group">
              <label data-icon="üéì">Academic Year</label>
              <input id="academicYear" type="text" placeholder="e.g. 2024-25" value="2024-25"/>
            </div>
          </div>
          <div class="form-grid">
            <div class="input-group">
              <label data-icon="üè´">Class Sections</label>
              <input id="classSections" placeholder="e.g. 5A,5B,5C,5D" value="5A,5B,5C"/>
            </div>
            <div class="input-group">
              <label data-icon="‚è∞">Periods in a Day</label>
              <input id="periodsPerDay" type="number" min="4" max="10" value="7" placeholder="Total periods"/>
            </div>
          </div>
          <div class="form-grid">
            <div class="input-group">
              <label data-icon="üçΩÔ∏è">After Lunch Periods</label>
              <input id="afterLunchPeriods" type="number" min="1" max="5" value="3" placeholder="Periods after lunch"/>
            </div>
          </div>
        </div>
        
        <!-- Premium Schedule Configuration Card -->
        <div class="card">
          <h2>üìã Schedule Config</h2>
          <div class="form-grid">
            <div class="input-group">
              <label data-icon="üåÖ">Start Time</label>
              <input id="startTime" type="time" value="09:00"/>
            </div>
            <div class="input-group">
              <label data-icon="üåÜ">End Time</label>
              <input id="endTime" type="time" value="17:00"/>
            </div>
          </div>
          <div class="form-grid">
            <div class="input-group">
              <label data-icon="‚òï">Short Break Start</label>
              <input id="shortBreakStart" type="time" value="11:00"/>
            </div>
            <div class="input-group">
              <label data-icon="‚è∞">Short Break End</label>
              <input id="shortBreakEnd" type="time" value="11:15"/>
            </div>
          </div>
          <div class="form-grid">
            <div class="input-group">
              <label data-icon="üçΩÔ∏è">Lunch Break Start</label>
              <input id="lunchBreakStart" type="time" value="13:00"/>
            </div>
            <div class="input-group">
              <label data-icon="üç¥">Lunch Break End</label>
              <input id="lunchBreakEnd" type="time" value="14:00"/>
            </div>
          </div>

        </div>
        
        <!-- Timing Preview Card -->
        <div class="card" id="timingPreviewCard">
          <h2>‚è∞ Timing Preview</h2>
          <div id="timingPreview" style="font-size:10px;line-height:1.3;color:var(--primary);max-height:120px;overflow-y:scroll;border:1px solid rgba(0,64,133,0.1);border-radius:3px;padding:3px;background:rgba(248,252,255,0.6);scrollbar-width:thin;scrollbar-color:var(--info) rgba(0,64,133,0.1);"></div>
        </div>
      </div>
      <div></div>
    </div>
  </div>

<script>
// Quick Setup Configuration
const quickSetupConfig = {
  workingDays: document.getElementById('workingDays'),
  academicYear: document.getElementById('academicYear'),
  classSections: document.getElementById('classSections'),
  periodsPerDay: document.getElementById('periodsPerDay'),
  afterLunchPeriods: document.getElementById('afterLunchPeriods')
};

const scheduleConfig = {
  startTime: document.getElementById('startTime'),
  endTime: document.getElementById('endTime'),
  shortBreakStart: document.getElementById('shortBreakStart'),
  shortBreakEnd: document.getElementById('shortBreakEnd'),
  lunchBreakStart: document.getElementById('lunchBreakStart'),
  lunchBreakEnd: document.getElementById('lunchBreakEnd')
};

// Save configuration to localStorage
function saveQuickSetup() {
  const config = {
    workingDays: quickSetupConfig.workingDays.value,
    academicYear: quickSetupConfig.academicYear.value,
    classSections: quickSetupConfig.classSections.value,
    periodsPerDay: quickSetupConfig.periodsPerDay.value,
    afterLunchPeriods: quickSetupConfig.afterLunchPeriods.value,
    startTime: scheduleConfig.startTime.value,
    endTime: scheduleConfig.endTime.value,
    shortBreakStart: scheduleConfig.shortBreakStart.value,
    shortBreakEnd: scheduleConfig.shortBreakEnd.value,
    lunchBreakStart: scheduleConfig.lunchBreakStart.value,
    lunchBreakEnd: scheduleConfig.lunchBreakEnd.value
  };
  
  localStorage.setItem('quickSetupConfig', JSON.stringify(config));
  console.log('Quick Setup saved:', config);
  
  // Debug log for after lunch periods
  console.log('After lunch periods:', config.afterLunchPeriods);
  console.log('Periods per day:', config.periodsPerDay);
}

// Load configuration from localStorage
function loadQuickSetup() {
  const saved = localStorage.getItem('quickSetupConfig');
  if (saved) {
    const config = JSON.parse(saved);
    Object.keys(config).forEach(key => {
      if (quickSetupConfig[key]) {
        quickSetupConfig[key].value = config[key];
      } else if (scheduleConfig[key]) {
        scheduleConfig[key].value = config[key];
      }
    });
  }
}

// Preview Timings Function
function previewTimings() {
  const periodsPerDay = parseInt(document.getElementById('periodsPerDay').value) || 7;
  const startTime = document.getElementById('startTime').value || '09:00';
  const shortBreakStart = document.getElementById('shortBreakStart').value || '11:00';
  const shortBreakEnd = document.getElementById('shortBreakEnd').value || '11:15';
  const lunchBreakStart = document.getElementById('lunchBreakStart').value || '13:00';
  const lunchBreakEnd = document.getElementById('lunchBreakEnd').value || '14:00';
  
  const periodDuration = 60; // minutes (1 hour per class)
  const previewDiv = document.getElementById('timingPreview');
  
  // Helper function to format time in 12-hour Indian format
  function formatIndianTime(date) {
    return date.toLocaleTimeString('en-IN', { 
      hour: '2-digit', 
      minute: '2-digit', 
      hour12: true 
    });
  }
  
  // Fixed allocation: 2 before short break, 2 after short break, remaining after lunch
  const beforeShortBreak = 2; // Fixed: 2 periods
  const afterShortBreak = 2;  // Fixed: 2 periods
  const afterLunch = periodsPerDay - beforeShortBreak - afterShortBreak; // Remaining periods
  
  let currentTime = new Date(`2024-01-01 ${startTime}:00`);
  let preview = '<div style="font-weight:bold;margin-bottom:6px;color:var(--primary);font-size:12px;text-align:center;padding:4px;background:rgba(0,64,133,0.06);border-radius:3px;">üìÖ Schedule</div>';
  
  // Before short break: 2 periods (compulsory)
  for(let i = 1; i <= beforeShortBreak; i++) {
    const endTime = new Date(currentTime.getTime() + periodDuration * 60000);
    preview += `<div style="padding:3px 6px;border-left:2px solid var(--info);background:rgba(23,162,184,0.03);margin:2px 0;border-radius:0 3px 3px 0;font-size:10px;font-weight:500;">P${i}: ${formatIndianTime(currentTime)} - ${formatIndianTime(endTime)}</div>`;
    currentTime = endTime;
  }
  
  // Short break
  const shortStart = new Date(`2024-01-01 ${shortBreakStart}:00`);
  const shortEnd = new Date(`2024-01-01 ${shortBreakEnd}:00`);
  preview += `<div style="padding:3px 6px;background:rgba(255,193,7,0.08);border-left:2px solid var(--warning);margin:2px 0;border-radius:0 3px 3px 0;font-size:10px;font-weight:500;">‚òï ${formatIndianTime(shortStart)}-${formatIndianTime(shortEnd)}</div>`;
  currentTime = new Date(`2024-01-01 ${shortBreakEnd}:00`);
  
  // After short break: 2 periods (compulsory)
  for(let i = beforeShortBreak + 1; i <= beforeShortBreak + afterShortBreak; i++) {
    const endTime = new Date(currentTime.getTime() + periodDuration * 60000);
    preview += `<div style="padding:3px 6px;border-left:2px solid var(--info);background:rgba(23,162,184,0.03);margin:2px 0;border-radius:0 3px 3px 0;font-size:10px;font-weight:500;">P${i}: ${formatIndianTime(currentTime)} - ${formatIndianTime(endTime)}</div>`;
    currentTime = endTime;
  }
  
  // Lunch break
  const lunchStart = new Date(`2024-01-01 ${lunchBreakStart}:00`);
  const lunchEnd = new Date(`2024-01-01 ${lunchBreakEnd}:00`);
  preview += `<div style="padding:4px 6px;background:rgba(40,167,69,0.08);border-left:2px solid var(--success);margin:3px 0;border-radius:0 3px 3px 0;font-weight:bold;font-size:11px;text-align:center;">üçΩÔ∏è ${formatIndianTime(lunchStart)}-${formatIndianTime(lunchEnd)}</div>`;
  currentTime = new Date(`2024-01-01 ${lunchBreakEnd}:00`);
  
  // After lunch: remaining periods (flexible based on total periods per day)
  for(let i = beforeShortBreak + afterShortBreak + 1; i <= periodsPerDay; i++) {
    const endTime = new Date(currentTime.getTime() + periodDuration * 60000);
    preview += `<div style="padding:3px 6px;border-left:2px solid var(--info);background:rgba(23,162,184,0.03);margin:2px 0;border-radius:0 3px 3px 0;font-size:10px;font-weight:500;">P${i}: ${formatIndianTime(currentTime)} - ${formatIndianTime(endTime)}</div>`;
    currentTime = endTime;
  }
  

  
  previewDiv.innerHTML = preview;
}

// Auto-update preview when any timing changes
function updatePreviewOnChange() {
  saveQuickSetup();
  previewTimings();
}

// Auto-save and update preview on change
Object.values(quickSetupConfig).forEach(element => {
  element.addEventListener('change', updatePreviewOnChange);
  element.addEventListener('input', updatePreviewOnChange);
});

Object.values(scheduleConfig).forEach(element => {
  element.addEventListener('change', updatePreviewOnChange);
  element.addEventListener('input', updatePreviewOnChange);
});

// Load saved configuration and show initial preview
loadQuickSetup();
previewTimings();
</script>
</body>
</html>